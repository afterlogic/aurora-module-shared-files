<div class="popup" style="display: none;">
	<div class="mask" data-bind="click: cancelPopup"></div>
	<div class="popup_panel popup_panel_shares">
		<span class="close" data-bind="click: cancelPopup"></span>
		<span class="popup_heading" data-bind="i18n: {'key': '%MODULENAME%/TITLE_SHARE_FILE'}"></span>

		<div class="fields">
			<div class="fieldset">
				<!-- ko if: hintText -->
				<div class="row">
					<span class="hint" data-bind="text: hintText"></span>
				</div>
				<!-- /ko -->
				<div class="row row_shares_list" data-bind="customScrollbar: {x: false}">
					<div class="scroll-inner" data-bind="initDom: sharesScrollAreaDom">
						<!-- ko if: shares().length === 0 -->
						<span class="hint" data-bind="i18n: {'key': '%MODULENAME%/INFO_NO_SHARES'}"></span>
						<!-- /ko -->
						<!-- ko if: shares().length > 0 -->
						<div class="shares_list" data-bind="foreach: shares">
							<div class="item item_share">
								<span class="title" data-bind="text: sPublicId"></span>
								<span class="del" data-bind="click: function () { $parent.deleteShare(sPublicId); }"></span>
								<span class="access_select" data-bind="dropdown: {}">
									<span class="dropdown_position_fixed">
										<span class="dropdown">
											<span class="dropdown_helper">
												<span class="dropdown_arrow"><span></span></span>
												<span class="dropdown_content" data-bind="foreach: $parent.aAccessList">
													<span class="item" data-bind="text: label,
														  css: {'selected': value === $parent.access()},
														  click: function () { $parent.access(value); }"></span>
												</span>
											</span>
										</span>
									</span>
									<span class="link control" data-bind="text: accessText"></span>
								</span>
							</div>
						</div>
						<!-- /ko -->
					</div>
				</div>
				<div class="row row_new_share">
					<input class="input" spellcheck="false" type="text" autocomplete="on"
						data-bind="valueUpdate: ['blur', 'afterkeydown'], initDom: selectedTeammateDom,
						i18n: {'key': '%MODULENAME%/LABEL_EMAIL_ADDRESS', 'type': 'placeholder'},
						autocompleteSimple: {callback: autocompleteCallback.bind($data), dataAccessor: selectedTeammateData}" />
				</div>
				<div class="row">
					<div class="shares_list">
						<div class="item">
							<span class="title">
								<label class="custom_checkbox checked" data-bind="css: {'checked': sharedWithAll}">
									<span class="icon"></span>
									<input type="checkbox" id="sharedWithAll" data-bind="checked: sharedWithAll">
								</label>
								<label for="sharedWithAll" data-bind="i18n: {'key': '%MODULENAME%/LABEL_SHARE_WITH_ALL'}"></label>
							</span>
							<span class="del"><!-- not displayed, holds the place --></span>
							<span class="access_select" data-bind="dropdown: {}, visible: sharedWithAll">
								<span class="link control" data-bind="text: sharedWithAllAccessText"></span>
								<span class="dropdown">
									<span class="dropdown_helper">
										<span class="dropdown_arrow"><span></span></span>
										<span class="dropdown_content" data-bind="foreach: aAccessList">
											<span class="item" data-bind="
												  text: label,
												  css: {'selected': value === $parent.sharedWithAllAccess()},
												  click: function () { $parent.setSharedWithAllAccess(value); }"></span>
										</span>
									</span>
								</span>
							</span>
						</div>
					</div>
				</div>
			</div>

			<div class="buttons">
				<span class="button contour_button" data-bind="i18n: {'key': '%MODULENAME%/ACTION_SHOW_HISTORY'},
						click: showHistory, visible: bAllowShowHistory"></span>
				<span class="button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_SAVE'},
						click: saveShares, css: {'disabled': isSaving()}"></span>
				<span class="button secondary_button" data-bind="i18n: {'key': 'COREWEBCLIENT/ACTION_CANCEL'},
						click: cancelPopup, css: {'disabled': isSaving()}"
				></span>
			</div>
		</div>
	</div>
	<span class="helper"></span>
</div>
